# Simple 2-Node Virtual DC Configuration
# 
# Topology:
#   [Leaf-1]
#     / \
#   HV1 HV2
#
# This is the simplest possible setup for testing and learning.

global:
  datacenter_name: "simple-lab"
  virtualization_platform: "kvm"

  # Management network configuration
  # NOTE: When using vdc-manager.sh, these values are auto-assigned
  management_network:
    subnet: "192.168.100.0/24"  # Auto-assigned by vdc-manager
    gateway: "192.168.100.1"    # Auto-assigned by vdc-manager
    description: "Out-of-band management network (L2)"
  
  kvm_settings:
    base_image: "ubuntu-22.04"
    default_user: "ubuntu"

hypervisors:
  - name: "hypervisor-1"
    short_name: "hv1"
    router_id: "1.1.1.1"
    asn: 65001
    management:
      ip: "192.168.100.11/24"
      switch: "mgmt-sw"
    data_interfaces:
      - name: "eth1"
        description: "Connection to Leaf-1 port 1"
    resources:
      cpu: 2
      memory: 2048  # MB
      disk: 30      # GB

  - name: "hypervisor-2"
    short_name: "hv2"
    router_id: "1.1.1.2"
    asn: 65002
    management:
      ip: "192.168.100.12/24"
      switch: "mgmt-sw"
    data_interfaces:
      - name: "eth1"
        description: "Connection to Leaf-1 port 2"
    resources:
      cpu: 2
      memory: 2048
      disk: 30

switches:
  leaf:
    - name: "leaf-1"
      router_id: "2.2.2.1"
      asn: 65101
      management:
        ip: "192.168.100.101/24"
        switch: "mgmt-sw"
      ports: 32
      port_speed: "10G"
      description: "Top-of-Rack switch"

  spine: []
  superspine: []

cabling:
  - source:
      device: "hypervisor-1"
      interface: "eth1"
    destination:
      device: "leaf-1"
      interface: "Ethernet1"
    link_type: "p2p"
    description: "HV1 to Leaf-1"

  - source:
      device: "hypervisor-2"
      interface: "eth1"
    destination:
      device: "leaf-1"
      interface: "Ethernet2"
    link_type: "p2p"
    description: "HV2 to Leaf-1"

topology_visual: |
  
  Simple 2-Node Virtual DC Topology
  ==================================
  
         [Leaf-1]
         (L3 BGP)
           / \
          /   \
         /     \
      [HV1]  [HV2]
       |       |
       └───┬───┘
       Management
        Network
        (L2)
  
  BGP Configuration:
  - HV1: AS 65001, Router-ID 1.1.1.1
  - HV2: AS 65002, Router-ID 1.1.1.2
  - Leaf-1: AS 65101, Router-ID 2.2.2.1
  
  All data plane connections use BGP unnumbered (IPv6 link-local)
  Management network: 192.168.100.0/24
